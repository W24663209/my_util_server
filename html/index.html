<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>我的工具</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="layui/css/layui.css" media="all">
    <script src="layui/layui.js" charset="utf-8"></script>
    <script src="layui/jquery-3.5.1.js" charset="utf-8"></script>
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
</head>

<style>
    .layui-input-block {
        display: inline-block;
    }
</style>
<body>

<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
    <!--  <legend>表单集合演示</legend>-->
</fieldset>

<form class="layui-form" action="">
    <div class="layui-form-item layui-form-text">
        <div class="layui-input-block">
            对象名:<input id="className">
            字段名:<input id="columnName">
            备注:<input id="remark">
            类型:<input id="classType">
        </div>
    </div>
    <div class="layui-form-item layui-form-text">
        <!--    <label class="layui-form-label">普通文本域</label>-->
        <div class="layui-input-block">
            <textarea placeholder="请输入内容" class="layui-textarea" id="input"
                      style="width: 70vh;height: 500px"></textarea>
        </div>
        <div class="layui-input-block">
            <textarea placeholder="输出内容" class="layui-textarea" id="output"
                      style="width: 70vh;height: 500px"></textarea>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-input-block">
            <div class="submit layui-btn" value="mybatis_log_to_sql">mysql日志转sql</div>
            <div class="submit layui-btn" value="get_layui_width">获取layui宽度</div>
            <div class="submit layui-btn" value="get_search_layui_value">layui生成搜索id</div>
            <div class="submit layui-btn" value="auto_fields_json">json生成对象</div>
            <div class="submit layui-btn" value="document_to_class">文档说明转class</div>
            <div class="layui-btn layui-btn-primary" id="reset">重置</div>
        </div>
    </div>
</form>

<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
<script>
    var layer;
    layui.use('layer', function () {
        layer = layui.layer;
    });
    $(function () {
        $(".submit").click(function () {
            var data = JSON.stringify($("#input").val())
            if ($(this).attr('value') == 'document_to_class') {
                data = JSON.stringify({'className': $("#className").val(),
                    'columnName': $("#columnName").val(),
                    'remark': $("#remark").val(),
                    'classType': $("#classType").val(),
                    'value': $("#input").val()})
            }
            $.ajax({
                //请求方式
                type: "POST",
                //请求的媒体类型
                contentType: "application/json;charset=UTF-8",
                //请求地址
                url: "http://127.0.0.1:9999/util?type=" + $(this).attr('value'),
                //数据，json字符串
                data: data,
                //请求成功
                success: function (result) {
                    $("#output").val(result)
                    copyText(result)
                },
                //请求失败，包含具体的错误信息
                error: function (e) {
                    console.log(e.status);
                    console.log(e.responseText);
                }
            });
        })
        $("#reset").click(function () {
            $("#input").val('')
            $("#output").val('')
        })
    })


    function copyText(text) {
        var oInput = document.createElement('input');
        oInput.value = text;
        document.body.appendChild(oInput);
        oInput.select(); // 选择对象
        document.execCommand("Copy"); // 执行浏览器复制命令
        oInput.className = 'oInput';
        oInput.style.display = 'none';
        layer.msg('复制成功');
    }

</script>

</body>
</html>